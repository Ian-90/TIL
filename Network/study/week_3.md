# 4. 실제로 컴퓨터끼리는 IP주소를 사용해 데이터를 주고받는다

## 1. 3계층의 기능
* 3계층은 **다른 네트워크 대역**이며, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어
* LAN과 LAN을 연결 시켜주는 역할
* 서로 다른 네트워크 대역을 연결하기 위해서 3계층 장비인 라우터가 필요
* 3계층에서 쓰는 주소 - IP 주소
  * IPv4 주소 - 현재 PC에 할당된 IP주소
  * 서브넷 마스크 - IP 주소에 대한 네트워크의 대역을 규정하는 것
  * 게이트웨이 주소 - 외부와 통신할 때 사용하는 네트워크의 출입구

* 3계층 프로토콜
  * ARP 프로토콜 - IP주소를 이용해 MAC주소를 알아오는 프로토콜
  * IPv4 프로토콜 - WAN에서 통신할 떄 사용하는 프로토콜
  * ICMP 프로토콜 - 서로가 통신되는지 확인할 때 사용

## 2. 일반적인 IP 주소(IPv4)
* IP 주소는 4바이트
* 10진수 사용
* Classful IP 주소 - 낭비가 심하다

  | 클래스 | 네트워크 구분 | 시작 주소 | 마지막 주소|
  |:------:|:--------:|:--------:|:---------:|
  |A Class| 0XXXXXXX, 첫번째 필드 | 0.0.0.0 | 127.255.255.255|
  |B Class| 10XXXXXX, 두번째 필드 | 128.0.0.0 | 191.255.255.255|
  |C Class| 110XXXXX, 세번째 필드 | 192.0.0.0 | 223.255.255.255|
  |D Class| 1110XXXX | 224.0.0.0 | 239.255.255.255|
  |E Class| 1111XXXX | 240.0.0.0 | 255.255.255.255|

* 2진수로 다 바꾸면 알기 쉬움
* 일반적으로 많이쓰는게 C Class
* D Class는 멀티캐스트
* E Class는 연구용
* Class에 맞게 쓰니 낭비가 심함.

* Classless
  * 원하는 구간에서 잘라서 네트워크 구분
  * 서브넷 마스크 - 네트워크 대역을 어디서 구분할지 지정한 값
    * 255.255.255.192 => 11111111.11111111.11111111.11000000
    * 2진수로 표기했을 때 1로 시작, 1과 1사이에는 0이 올수 없다

* IP 낭비가 심해서 사설 IP와 공인 IP 개념 도입
  * 공인 IP 1개당 2^32개의 사설 IP
  * 공인 IP - 실제 네트워크 통신망이랑 통신할 때 사용하는 IP 주소
  * 사설 IP - 같은 네트워크 대역에서 사용하는 IP 주소
  * 사설끼리 통신할 땐 사설 IP로 통신하며, 외부(ex.네이버)랑 통신할땐 같은 주소로 나옴(ipconfig하면 사설IP나옴)
    * 사설IP를 공인IP로 변경하는 것을 NAT(특정 IP를 특정 IP로 변경하는 기술)
    * IP 부족현상 해결
    * 집에서 쓰는 인터넷은 공인 IP임~
  * 외부에서는 공인IP로 통신하기 때문에 사설IP 대역이 보이지 않는다.
  * 서버는 공인 IP로씀
  * 추가설정 - 포트포워딩

* IPv6
  * IPv4는 32비트이지만, IPv6는 128비트이므로 훨씬 많다.
  * 라우터에 부담을 덜준다.

## 3. 특수한 IP 주소
* 0.0.0.0 - 나머지 모든 ip~
* 127.0.0.1 - 자기 자신
* 게이트웨이 - 어딘가로 가려면 일단 여기로 192.168.0.1
  * 보통 공유기 ip를 씀
  * 공유기 뒷면 wan - 공인 ip
  * 네트워크대역에서 가장 낮거나 가장높은걸로 씀. 근데 일반적으로는 가장 낮은거 씀
  * 외부 세상으로 나가는 문이 어딘지 알려주는 값
